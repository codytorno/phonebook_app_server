(this.webpackJsonpphonebook_app=this.webpackJsonpphonebook_app||[]).push([[0],{21:function(e,n,t){},22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var o=t(16),a=t.n(o),c=(t(21),t(3)),r=(t(22),t(2)),u=t(0),i=function(e){var n=e.person,t=e.onDeleteClick;return Object(u.jsxs)("div",{children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:function(e){return t(e,n)},children:"Delete"})]})},l=function(e){var n=e.people,t=e.filterValue,o=e.handlePeopleChange,a=""===t?n:n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())}));return Object(u.jsx)("div",{children:a.map((function(e){return Object(u.jsx)(i,{person:e,onDeleteClick:o},e.name)}))})},d=function(e){var n=e.filterValue,t=e.onValueChange;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},s=t(5),p=t(7),f={name:"",number:""},m=function(e){var n=e.addPersonHandled,t=e.updatePersonHandled,o=e.people,a=Object(r.useState)(f),i=Object(c.a)(a,2),l=i[0],d=i[1];console.log("InputPerson Component Updated!");var m=function(e){var n=e.target,t=n.name,o=n.value;d(Object(p.a)(Object(p.a)({},l),{},Object(s.a)({},t,o)))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:l.name,onChange:m,name:"name"})]}),Object(u.jsxs)("div",{children:["number:",Object(u.jsx)("input",{value:l.number,onChange:m,name:"number"})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:function(e){return function(e,a){if(a.name)if(a.number){var c=o.find((function(e){return e.name.toUpperCase()===a.name.toUpperCase()}));c?window.confirm("".concat(a.name," is already in the phonebook, repleace the old number with updated number?"))&&(c.number=a.number,t(e,c)):n(e,a),d(f)}else alert("Number can not be empty");else alert("Name can not be empty")}(e,l)},children:"add"})})]})},b=function(e){var n=e.message;return n?Object(u.jsx)("div",{className:"notification",children:n}):null},j=t(4),h=t.n(j),O="/api/persons",v=function(){return h.a.get(O).then((function(e){return e.data}))},x={getAll:v,createNew:function(e){return h.a.post(O,e).then((function(e){return e.data}))},deleteItem:function(e){return h.a.delete("".concat(O,"/").concat(e)),v()},updateItem:function(e){return h.a.put("".concat(O,"/").concat(e.id),e).then((function(e){return e.data}))}},g=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),i=Object(c.a)(a,2),s=i[0],p=i[1],f=Object(r.useState)(null),j=Object(c.a)(f,2),h=j[0],O=j[1];Object(r.useEffect)((function(){console.log("Getting data"),x.getAll().then((function(e){o(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{value:s,onValueChange:function(e){var n=e.target.value;p(n)}}),Object(u.jsx)("h2",{children:" add a new"}),Object(u.jsx)(m,{addPersonHandled:function(e,n){if(e.preventDefault(),function(e,n){return e.some((function(e){return e.name.toUpperCase()===n.toUpperCase()}))}(t,n.name))return O("".concat(n.name," is already added to phonebook")),void setTimeout(O(null),3e3);x.createNew(n).then((function(e){o(t.concat(e))})).then((function(){O("Added ".concat(n.name," to phonebook")),setTimeout((function(){return O(null)}),3e3)}))},updatePersonHandled:function(e,n){e.preventDefault(),x.updateItem(n).then((function(e){o(t.map((function(n){return n.id!==e.id?n:e})))})).then((function(){O("Updated ".concat(n.name," in phonebook")),setTimeout((function(){return O(null)}),3e3)})).catch((function(e){O("Note '".concat(n.name,"' was already removed from server")),setTimeout((function(){O(null)}),5e3),o(t.filter((function(e){return e.name!==n.name})))}))},people:t}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{people:t,filterValue:s,handlePeopleChange:function(e,n){e.preventDefault(),window.confirm("Are you sure you want to delete ".concat(n.name))&&x.deleteItem(n.id).then((function(e){o(e)})).then((function(){O("Deleted ".concat(n.name," from phonebook")),setTimeout((function(){return O(null)}),3e3)}))}}),Object(u.jsx)(b,{message:h})]})};a.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.559ad705.chunk.js.map